<head>
<meta name="CS490" content="width=device-width, initial-scale=1.0">
<!-- Bootstrap -->
<link href="css/bootstrap.css" rel="stylesheet" media="screen">
<link rel="stylesheet" href="http://openlayers.org/en/v3.2.1/css/ol.css" type="text/css">

<style>
  .map {
    height: 400px;
    width: 100%;
  }


  .vertical-offset-100{
    padding-top:100px;
  }

</style>
<script src="http://openlayers.org/en/v3.2.1/build/ol.js" type="text/javascript"></script>
<title>CS490 My Mapper</title>



<script src="js/bootstrap.min.js"></script>
<script src="js/jquery-2.1.1.min.js"></script>
<script src="js/bootstrap-select.js"></script>



<!-- Initialize map with Current Location on Laptop Browsers
 -- need Google Map Javascript API V3
 -- need HTML5 supported
 -->
<!-- If view from mobile browsers, we will simply call GPS instead-->

<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>

<script>
// Note: This script requires that you consent to location sharing when
// prompted by your browser. If you see a blank space instead of the map, this
// is probably because you have denied permission for location sharing.

var map;

function initialize() {
  var mapOptions = {
    zoom: 6
  };
  map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);

  // Try HTML5 geolocation
  if(navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      var pos = new google.maps.LatLng(position.coords.latitude,
                                       position.coords.longitude);

      var infowindow = new google.maps.InfoWindow({
        map: map,
        position: pos,
        content: 'Location found using HTML5.'
      });

      map.setCenter(pos);
    }, function() {
      handleNoGeolocation(true);
    });
  } else {
    // Browser doesn't support Geolocation
    handleNoGeolocation(false);
  }
}

function handleNoGeolocation(errorFlag) {
  if (errorFlag) {
    var content = 'Error: The Geolocation service failed.';
  } else {
    var content = 'Error: Your browser doesn\'t support geolocation.';
  }

  var options = {
    map: map,
    position: new google.maps.LatLng(60, 105),
    content: content
  };

  var infowindow = new google.maps.InfoWindow(options);
  map.setCenter(options.position);
}

google.maps.event.addDomListener(window, 'load', initialize);

</script>




</head>

<body onload="initialize()">

    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
            
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand">CS490</a>
        </div>

        <!-- Collect the search options -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
  
            <form class="navbar-form navbar-left" onsubmit=" return false;">
                <div class="form-group">
                    <input type="hidden" id="TypeChoice" >

                        <select class="form-control" name="select-type-of-interest" onchange="dropdownTest(this.value)">
                            <option value="defaultopts" selected>--Type of interests--</option>
                            <option value="Type-Restaurant">Restaurant</option>
                            <option value="Type-Hotel">Hotel</option>
                            <option value="Type-GasStation">Gas Station</option>
                            <option value="Type-ParkingLot">Parking Lot</option>
                            <option value="Type-PoliceCar">Police Car</option>
                            <option value="Type-Taxi">Taxi</option>
                        </select>
                    </input>
                </div>
    
            </form>
        
            
            <form class="navbar-form navbar-left" onsubmit=" return false;">
                <div class="form-group">
                    <input type="hidden" id="RangeChoice" >

                            <select class="form-control" name="select-range" onchange="dropdownTest(this.value)">
                            <option value="defaultopts" selected>--Range--</option>
                            <option value="Range-half">Within half a Mile</option>
                            <option value="Range-one">Within 1 Mile</option>
                            <option value="Range-two">Within 2 Miles</option>
                        </select>
                    </input>
                </div>

            </form>   
    
            <!--Search Button-->
            <button type="button" class="btn btn-default btn-lg" onclick="search()">Search</button>
        
            <!--
            <button type="button" class="btn btn-default btn-lg" onclick="testloc()">Loc test 1</button>
            <button type="button" class="btn btn-default brn-lg" onclick="hideMarkers()">Hide test</button>
            <button type="button" class="btn btn-default brn-lg" onclick="eventTest()">Event test</button>    
            -->
       
        </div><!--end of collapse navbar-collapse-->   
    </div><!-- end of container-fluid -->

    <div id="map"></div>


    
<script type="text/javascript">
  var openCycleMapLayer = new ol.layer.Tile({
    source: new ol.source.OSM({
      attributions: [
      new ol.Attribution({
        html: 'All maps &copy; ' +
        '<a href="http://www.opencyclemap.org/">OpenCycleMap</a>'
      }),
      ol.source.OSM.ATTRIBUTION
      ],
      url: 'http://{a-c}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png'
    })
  });

  var openSeaMapLayer = new ol.layer.Tile({
    source: new ol.source.OSM({
      attributions: [
      new ol.Attribution({
        html: 'All maps &copy; ' +
        '<a href="http://www.openseamap.org/">OpenSeaMap</a>'
      }),
      ol.source.OSM.ATTRIBUTION
      ],
      crossOrigin: null,
      url: 'http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png'
    })
  });


  var map = new ol.Map({
    layers: [
    openCycleMapLayer,
    openSeaMapLayer
    ],
    target: 'map',
    controls: ol.control.defaults({
      attributionOptions: /** @type {olx.control.AttributionOptions} */ ({
        collapsible: false
      })
    }),
    view: new ol.View({
      maxZoom: 18,
      center: ol.proj.transform([ -86.9080556, 40.4258333], 'EPSG:4326', 'EPSG:3857'),
      zoom: 15
    })
  });
</script>

</body>


