/*!
* JqueryOpenStreetMap Pluggin v1.0
*
* This jquery plugin show a OpenStreetMap Layer map.
* Please see licence and documentation on https://github.com/apoutchika/JqueryOpenStreetMap
*/
(function(a){a.fn.openStreeMap=function(b){a(this).openStreetMap(b);return this};a.fn.openStreetMap=function(c){var b=0;a(this).map(function(d,e){if(a(e).attr("id")==undefined){while(a("#ApoutchikaJqueryOpenStreetMap"+b).length!=0){b++}a(e).attr("id","ApoutchikaJqueryOpenStreetMap"+b)}a(e).generateOpenStreetMap(c)});return this};a.fn.generateOpenStreetMap=function(f){if(f==undefined){var f={}}if(!f.zoom){f.zoom=1}if(!f.center){f.center={}}if(!f.center.lat){f.center.lat=0}if(!f.center.lng){f.center.lng=0}var e=khtml.maplib.Map(document.getElementById(a(this).attr("id")));e.centerAndZoom(new khtml.maplib.LatLng(f.center.lat,f.center.lng),f.zoom);if(f.zoombar){var b=new khtml.maplib.ui.Zoombar();e.addOverlay(b)}addCallbackFunction=function(j,i){h[j].addCallbackFunction(function(){var k=this.getPosition();i({lat:k.latitude,lng:k.longitude})})};addInfobox=function(j,i,k){var i=new khtml.maplib.overlay.InfoWindow({content:i});j.attachEvent("click",function(){i.open(e,this)});if(k==true){i.open(e,j)}};var h=[];for(var d in f.markers){var g={position:new khtml.maplib.LatLng(f.markers[d].pos.lat,f.markers[d].pos.lng),map:e,icon:{url:"http://maps.gstatic.com/intl/de_de/mapfiles/ms/micons/red-pushpin.png",size:{width:26,height:32},origin:{x:0,y:0},anchor:{x:-10,y:-32}},shadow:{url:"http://maps.gstatic.com/intl/de_de/mapfiles/ms/micons/pushpin_shadow.png",size:{width:40,height:32},origin:{x:0,y:0},anchor:{x:0,y:-32}}};if(f.markers[d].draggable){g.draggable=true}g.title=(f.markers[d].title)?f.markers[d].title:"Marker "+d;h[d]=new khtml.maplib.overlay.Marker(g);if(typeof(f.markers[d].draggend)=="function"){addCallbackFunction(d,f.markers[d].draggend)}if(f.markers[d].infobox&&f.markers[d].infobox.content){var c=(f.markers[d].infobox.open)?true:false;addInfobox(h[d],f.markers[d].infobox.content,c)}}return this}})(jQuery);
